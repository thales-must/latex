\documentclass{article}
\usepackage[UTF8]{ctex}
\usepackage{xcolor}
\usepackage{mdframed}
\usepackage{algorithm2e}

% ====== 条件开关设置 ======
\newif\ifshowrevised
\showrevisedtrue  % 打开：显示红色标记和红框
%\showrevisedfalse % 关闭：正常显示

% ====== 统一命令定义 ======
% 先定义默认版本（无标记）
\providecommand{\revised}[1]{#1}
\providecommand{\startrevisedalgorithm}{}
\providecommand{\stoprevisedalgorithm}{}

% ====== 条件重定义 ======
\ifshowrevised
    % 打开条件：显示红色标记
    \renewcommand{\revised}[1]{\textcolor{red}{#1}}
    \renewcommand{\startrevisedalgorithm}{\begin{mdframed}[linecolor=red,linewidth=1.5pt]}
    \renewcommand{\stoprevisedalgorithm}{\end{mdframed}}
\fi

\title{论文修订标记示例}
\author{作者}
\date{\today}

\begin{document}
\maketitle

\section{文本修订标记示例}

\subsection{原始文本}
机器学习是一种人工智能技术。

\subsection{修改后文本}
\revised{深度学习}是一种\revised{强大的人工智能技术}。

\subsection{代码示例}
\begin{verbatim}
原始：机器学习是一种人工智能技术。
修改：\revised{深度学习}是一种\revised{强大的人工智能技术}。
\end{verbatim}

\section{算法红框示例}

\subsection{原始算法}
\begin{algorithm}[H]
  \SetAlgoLined
  \KwData{训练数据 $X$, 标签 $y$}
  \KwResult{模型参数 $\theta$}
  初始化 $\theta$\;
  \For{每个 epoch}{
    计算梯度 $\nabla L(\theta)$\;
    更新 $\theta \leftarrow \theta - \eta \nabla L(\theta)$\;
  }
  \caption{梯度下降算法}
\end{algorithm}

\subsection{带红框的修订算法}
\startrevisedalgorithm
\begin{algorithm}[H]
  \SetAlgoLined
  \KwData{训练数据 $X$, 标签 $y$}
  \KwResult{模型参数 $\theta$}
  初始化 $\theta$\;
  \For{每个 epoch}{
    计算梯度 $\nabla L(\theta)$\;
    \revised{应用动量项：$v \leftarrow \beta v + \nabla L(\theta)$}\;
    更新 $\theta \leftarrow \theta - \eta v$\;
  }
  \caption{\revised{改进的}梯度下降算法}
\end{algorithm}
\stoprevisedalgorithm

\subsection{代码示例}
\begin{verbatim}
\startrevisedalgorithm
\begin{algorithm}[H]
\SetAlgoLined
...
\caption{\revised{改进的}梯度下降算法}
\end{algorithm}
\stoprevisedalgorithm
\end{verbatim}

\section{切换模式说明}

\subsection{当前模式}
当前设置：\verb|\showrevisedtrue|

效果：文本显示\revised{红色}，算法有红框。

\subsection{切换方法}
在导言区修改：
\begin{verbatim}
% 显示标记和红框（写作时）
\showrevisedtrue

% 隐藏标记和红框（提交时）
%\showrevisedfalse
\end{verbatim}

\subsection{重新编译}
修改后需要重新编译：
\begin{verbatim}
pdflatex sample.tex
\end{verbatim}

\end{document}